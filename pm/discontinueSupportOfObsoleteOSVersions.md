# Процесс прекращения поддержки старых версий ОС

Приложения разработанные в Touch Instinct гарантированно должны работать на ~95% устройств на момент активной разработки или поддержки. Поддержка остальных ~5% устройств нерентабельна.

## Как определить, что пора прекращать поддержку устройств?

Через полгода после выхода последней версии ОС необходимо проверить актуальное процентное соотношение пользователей на старых и новых версиях ОС.

Примерно 95% пользователей должно попасть в список с 
новыми версиями ОС, остальные 5% - в список со старыми.

Данные можно получить из открытых источников:

- [Данные по активным версиям iOS в России за Март 2020 из StatCounter](https://gs.statcounter.com/ios-version-market-share/mobile/russian-federation/#monthly-202003-202003-bar) (для получения точных цифр нужно скачать csv файл)
- [Данные по использованию двух последних мажорных версий iOS в AppStore](https://developer.apple.com/support/app-store/)


Из аккаунта в AppStore:

- https://analytics.itunes.apple.com/#/metrics?interval=r&datesel=d30&zoom=day&measure=activeDevices&type=line&app=ENTER\_APP\_STORE\_APP\_ID&view_by=4

Google Play Console:

Чтобы посмотреть распределение активных пользователей по версиям Android, нужно зайти на страницу приложения в Google Play Console, зайти в раздел "Статистика". По умолчанию, первый отчет на странице отображает распределение по осям


## Кто отвественный за процесс?
Лиды платформ. Они могут привлекать к процессу менеджеров и разработчиков.

## Как убедить заказчика?

### 1. Обснование удорожания разработки

- В связи с агрессивной политикой apple по обновлению ОС на устройствах, тестовые устройства со старыми версиями ОС сейчас очень сложно найти, что усложняет ручное тестирование и поддержку данных ОС.
- Каждая версия ОС требует проведения полного тестирования (особенно перед выкладкой в стор). Мы осуществляем миграционное и регрессионное тестирование, что при поддержании старых версий ОС (11 и ниже) требует дополнительных трудозатрат, следовательно мы получаем 2х времени на тестирование, что увеличивает и сроки разработки, сроки поставок, а также стоимость.
- Воспроизведение и фикс багов связанных с этими версиями ОС также увеличивает срок разработки  до 2x времени в сравнении с багами на более новых ОС.
- Некоторые компоненты и фичи недоступны на старых версиях ОС, поэтому приходится писать больше кода  и придумывать обходные пути для их поддержки, что увеличивает время разработки и стоимость.

### 2. Аргументы за отказ от старых версий

- Большинство пользователей скорей всего могут обновится до новой версии ОС. Проверить это можно воспользовавшись вышеприведенными ссылками на StatCounter и сравнив значение с количеством активных моделей устройств не поддерживающих обновление до последней версии.
	- [Данные по самым распространённым моделям iPhone в России](https://deviceatlas.com/blog/most-popular-iphones#russia)

- Можно сослаться на большое количество уязвимостей в системе. Для этого есть [специальный сайт](https://www.cvedetails.com), на котором можно настроить фильтр по вендору, продукту и версии продукта. Например: [Apple, Iphone Os, 10% (% - "like" query)](https://www.cvedetails.com/version-search.php?vendor=Apple&product=Iphone+Os&version=10%25)
- При наличии, можно привести список крупных оптимизаций на уровне системы, которые влияют на скорость запуска и скорость работы приложения.

### 3. Причины, по которым может быть нужна поддержка старых ОС

- Если пользователи, использующие ваше приложение, приносят больше прибыли, чем стоит поддержка старых версий ОС для них.
- Если вы планируете отключить часть старых методов API и хотите, чтобы все пользователи смогли продолжить пользоваться приложением на новых методах API.

### 4. Участь пользователей, не обновивших ОС

- Пользователи, cо старыми версиямии ОС перестанут получать возможность обновления МП, но они также продолжат пользоваться его функционалом.
- Бóльшая часть пользователей может накатить обновления OC, а мы можем им с этим помочь. Для этого разрабатывается онбординг из одного экрана, который при запуске МП будет оповещать о том, что пользователю необходимо произвести обновление ОС и при клике на кнопку “обновить” мы будем перенаправлять пользователя в настройки девайса, где он сможет запустить обновления. 

### 5. Заключение

Мы рекомендуем вам отказаться от поддержки старых версий ОС для оптимизации стоимости разработки и качества UX для пользователей, если это не противоречит п.3.

В случае, если вы принимаете решение о продолжении поддержки старых версий ОС, то стоимость разработки и тестирования будет увеличена на 30%.

## Артефакты

Результатом работы должно быть письмо, которое менеджер может переслать клиенту для согласования.

Пример письма с аргументами за отказ от iOS 10 и 11 можно посмотреть [по ссылке](https://docs.google.com/document/d/1CJGqoJvgy1VKPTmqRLW-IsPND-xvjKpxQSD7AQnJ2pI/).
