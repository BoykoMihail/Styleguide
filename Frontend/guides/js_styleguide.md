## JS

- не использовать `bind`, использовать стрелочную функцию + `transform-class-properties`

- использовать только `lodash/fp`, не `lodash`

- никогда не импортировать `lodash/fp` полностью, нужно импортить конкретный метод, например `import _isNil from 'lodash/fp/isNil`

- название импортируемых `lodash/fp` методов должно начинаться с `_`. Пример выше

- для доступа к вложенным свойствам объекта использовать `lodash/fp/get` или `lodash/fp/getOr`

- Имена констант должны быть UPPER_CASE'ом. Имена групп констант должны быть CamelCase и начинаться с большой буквы. Например:

``` js
const DATE_FORMAT = '';

const Color = {
    WHITE: 1
}
```

## React

- для item'а списка должен создаваться отдельный компонент, который выносится в файл с именем этого компонента. За исключением вывода простого списка строк.

- по возможности убирать js код из jsx структуры. Использовать этот компонент [jsx-control-statements](https://github.com/AlexGilleran/jsx-control-statements)

... вместо `this.props.items.map` использовать `<For>`

... вместо `{ name && <div>{name}</div> }` использовать `If`

... вместо `{ name ? <div>{name}</div> : <span>NoName</span> }` использовать `<Choose> <When>`

- при использовании `PureComponent` убедиться, что parent не передает стрелочные функции, новые массивы или объекты, созданные в методе `render`

- использовать `react-props` только для проверки сложной структуры объекта, которая используется в данном компоненте. Правило обязательной проверки `props` должно быть ВЫКЛЮЧЕНО в eslint'е


## Redux

- использовать [immutable.js](https://facebook.github.io/immutable-js/docs/) для хранения данных

- в `immutable` структуру должен заворачиваться весь объект с потомками, а не только первый уровень объекта

- структура папок должна соответствовать структуре, описанной в статье [Структура проекта](js_project.md)

- списки элементов хранить в структуре:

...__result__ - упорядоченный список из `id` элементов. Инициализируется в редьюсере как `List()`

...__entities__ - мапа элементов, ключ - `id`. . Инициализируется в редьюсере как `Map()`

...__loading__ - индикатор загрузки `true/false`. Инициализируется в редьюсере как `false`

...__error__ - текстовое поле с ошибкой, если выставлено, то произошла ошибка при загрузке данных. Поле содержит локализованную строку. При успешном запросе, поле сбрасывается в `null`

...__loadedAt__ - дата последнего получения данных с сервера, если не проставлено, то данные не запрашивались. Если произошла ошибка при получении данных, то это поле все равно должно быть проставлено.

- если мы хотим вывести на экран список элементов, то должно быть 3 компонента:

...Умный компонент, который получает из стора `result`

...Умный компонент, который получает от парента `id` элемента и достает его из стора

...Глупый компонент, который получет объект и рендерит его.

- в `action'е` запрещается передавать `immutable` объект

- для асинхронных `action'ов` использовать [redux-logic](https://github.com/jeffbski/redux-logic)

- не использовать `state` у компонента, к которому подключен `redux`

- для преобразования сначений redux-state'а в props использовать `reselect`

### Action

Формат экшена

``` js
{
    type: String,
    payload: Any, // любые данные полученые от сервера, либо ошибка
    prevAction: Action, // это поле используется в экшене с ошибкой, нужно для повторной отправки
    executeWithDelay: number, // отложенное выполнение экшена в секундах
}
```
