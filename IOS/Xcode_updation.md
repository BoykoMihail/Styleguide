# Процесс актуализации проектов при обновлениях Xcode

Важно держать Xcode и сам проект в актуальном состоянии. Это связано как с развитием языка Swift, обеспечением стабильной работы приложений, поддержкой новых устройств и операционных систем, так и с прочими аспектами жизненного цикла ПО. Но также не менее важно обеспечить стабильный и независимый процесс разработки и в случаях, когда актуализация версии Xcode ведет к ухудшению или замедлению данного процесса, то возможно решение об отсрочке обновления проектов до стабилизации обновления.

## Подготовка к обновлению

За месяц до предполагаемого обновления (как правило, обновление выпадает на вторую неделю сентября, соответственно начало работ по обновлению выпадет на вторую неделю августа) лид уведомляет менеджеров проектов о начале процесса и назначает ответственного за процесс разработчика. Ответственный за обновление скачивает beta-версию Xcode, собирает на ней проект и передает собранный билд менеджерам и тестировщикам. Таким образом, команда сможет оценить и согласовать с клиентом планируемые работы, а также скорректировать нагрузку на ответственных и/или уточнить сроки релиза (демо отдачи) по проекту, чтобы убедиться, что обновление не поставит под вопрос качество и общую возможность релиза (демо отдачу).

## Обновление

Для того, чтобы не затягивать обновление Xcode и актуализацию проектов, но при этом постараться минимизировать риски, накладываемые процессом разработки (демо отдачи заказчику, релизы и т.д.) и риски обеспечения стабильности общей работы проекта (проблемы с ключевыми библиотеками, кардинальные для проекта нововведения Xcode и т.д.) принимается следующее соглашение, относительно актуализации Xcode на проектах компании:

1. Отключается автоматическое обновление на билдере. Билдер обновляется в самую последнюю очередь, когда каждый из проектов будет переведен на новую версию Xcode локально на машинах разработчиков.

2. Лид платформы следит за выходом официального релиза Xcode и в день релиза объявляет о начале процесса обновления проектов компании в два этапа. Первый этап заключается в перекомпиляции (обновлении) библиотек, используемых проектами. Второй этап нацелен на обновление самих проектов.

    - В iOS чате, далее общий чат, лидом назначаются разработчики и между ними распределяются библиотеки, используемые в проектах компании, подлежащие обновлению. Не дольше чем через сутки (24 часа) каждый из назначенных разработчиков должен отчитаться в общем чате об успешном обновлении закрепленных за ним библиотек. Если в отведенный срок обновление произведено не было, то разработчик также отчитывается с указанием причин. Важно как можно раньше сообщить о возникших проблемах, чтобы лид имел представление о текущем статусе работ и возникших сложностях. Переход на следующий этап невозможен без обновления списка указанных библиотек всеми назначенными разработчиками.

    - Следующим этапом в общем чате лидом так же назначается по ответственному на проект, каждый из которых будет заниматься обновлением закрепленного за ним проекта на своей машине локально. Не дольше чем через 3 дня (72 часа) после начала процесса обновления - каждый из ответственных разработчиков должен отчитаться в общем канале об успешном обновлении проекта. Если в отведенный срок обновление произведено не было, то разработчик также отчитывается с указанием причин. В данном случае приоритет обновления вырастает, дабы не тормозить фиксацию обновления у проектов, успешно прошедших данный процесс.

3. Только после успешного локального обновления каждого из проектов - происходит обновление на билдере, о начале которого извещает лид. 

Разработчик должен как можно раньше приступить к обновлению. Протестировать полную сборку проекта (под конфигурациями debug и release) и обновление библиотек (pod/carthage update). Рекомендуется устанавливать новую версию Xcode рядом с текущей, чтобы в случае неудачи иметь возможность продолжить работу в старой версии. В случае, если после обновления билдера, сборка проекта завершается неудачей - ответственный разработчик также обязан как можно быстрее завершить обновление с отчетом в общем чате.
